<!DOCTYPE html>
<html>

<head>
  <script src="https://ok1static.oktacdn.com/assets/js/sdk/okta-auth-js/2.0.1/okta-auth-js.min.js" type="text/javascript"></script>
</head>

<body>
  <script type="text/javascript">

var options = {
  url: 'https://textmethod.okta.com',
  clientId: '0oaarkncuf66O1gKd356',
  redirectUri: 'http://localhost:5000',
  issuer: 'https://textmethod.okta.com/oauth2/ausaroy8pupHxvIkE356'
}

var authClient = new OktaAuth(options);

async function main() {
  var sessionExists = await authClient.session.exists();
  if (sessionExists) {
    var session = await authClient.session.get();
    var tokens = await authClient.token.getWithoutPrompt({
      responseType: ['id_token', 'token'],
      scopes: ['email', 'profile', 'openid', 'orders:update']
    });
    console.log(JSON.stringify(tokens));
    window.location = '/';
  } else {
    console.log('not logged in');
    var tokens = await authClient.token.getWithRedirect({
      responseType: ['id_token', 'token'],
      scopes: ['email', 'profile', 'openid']
    });
  }
}

main();

  </script>

</body>
</html>
